{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/gauta/Desktop/whats-app-clone/chat-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2;import React,{useEffect,useState}from'react';import{getUsers,setConversation}from'../../../service/api';import{Box,Divider}from'@mui/material';import{Conversation}from'./Conversation';import{useContext}from'react';import{AccountContext}from'../../account/context/AccountProvider';import styled from'@emotion/styled';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Component=styled(Box)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\nheight: 81vh;\\n\\noverflow:overlay;\\n\"])));const StyledDivider=styled(Divider)(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\nmargin: 0 0 0 70px;\\nbackground-color: #e9edef;\\nopacity:0.6;\\n\"])));export const Conversations=_ref=>{let{text}=_ref;const[users,setUsers]=useState([]);const{account,setActiveUsers,socket,person}=useContext(AccountContext);useEffect(()=>{const fetchData=async()=>{let res=await getUsers();const filteredData=res.filter(user=>user.name.toLowerCase().includes(text.toLowerCase()));setUsers(filteredData);// console.log(users);\n};const makeConversations=async()=>{users.filter(user=>user.sub!==account.sub).map(async user=>{await setConversation({senderId:account.sub,receiverId:user.sub});});};fetchData();makeConversations();},[text]);useEffect(()=>{socket.current.emit('addUsers',account);socket.current.on('getUsers',users=>{setActiveUsers(users);});},[account,person]);return/*#__PURE__*/_jsx(Component,{children:users.filter(user=>user.sub!==account.sub).map(user=>/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Conversation,{user:user}),/*#__PURE__*/_jsx(StyledDivider,{})]}))});};","map":{"version":3,"names":["React","useEffect","useState","getUsers","setConversation","Box","Divider","Conversation","useContext","AccountContext","styled","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Component","_templateObject","_taggedTemplateLiteral","StyledDivider","_templateObject2","Conversations","_ref","text","users","setUsers","account","setActiveUsers","socket","person","fetchData","res","filteredData","filter","user","name","toLowerCase","includes","makeConversations","sub","map","senderId","receiverId","current","emit","on","children"],"sources":["C:/Users/gauta/Desktop/whats-app-clone/chat-app/src/components/chat/menu/Conversations.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { getUsers, setConversation } from '../../../service/api'\r\nimport { Box, Divider } from '@mui/material';\r\nimport { Conversation } from './Conversation';\r\nimport { useContext } from 'react';\r\nimport { AccountContext } from '../../account/context/AccountProvider';\r\nimport styled from '@emotion/styled';\r\n\r\nconst Component = styled(Box)`\r\nheight: 81vh;\r\n\r\noverflow:overlay;\r\n`\r\n\r\nconst StyledDivider = styled(Divider)`\r\nmargin: 0 0 0 70px;\r\nbackground-color: #e9edef;\r\nopacity:0.6;\r\n`\r\n\r\nexport const Conversations = ({text}) => {\r\n\r\n    const [users,setUsers] = useState([]);\r\n    const {account,setActiveUsers,socket,person} = useContext(AccountContext);\r\n\r\n    useEffect(()=> {\r\n\r\n        const fetchData = async () => {\r\n            let res = await getUsers(); \r\n            const filteredData = res.filter(user => user.name.toLowerCase().includes(text.toLowerCase()));\r\n            setUsers(filteredData);\r\n            // console.log(users);\r\n        }\r\n        \r\n        const makeConversations = async() => {\r\n            users.filter((user) => user.sub!==account.sub)\r\n            .map(async(user)=>{\r\n                await setConversation({senderId: account.sub, receiverId: user.sub })\r\n            })\r\n        }\r\n\r\n        fetchData();\r\n        makeConversations();\r\n    },[text]);\r\n\r\n\r\n\r\n    useEffect(()=> {\r\n        socket.current.emit('addUsers',account)\r\n        socket.current.on('getUsers', users => {\r\n            setActiveUsers(users);\r\n        })\r\n    },[account,person])\r\n\r\n  return (\r\n    <Component>\r\n        {\r\n            users.filter(user => user.sub!==account.sub).map(user=>(\r\n                <>\r\n                    <Conversation user={user} />\r\n                    <StyledDivider/>\r\n                </>\r\n            ))\r\n        }\r\n    </Component>\r\n  )\r\n}\r\n"],"mappings":"0LAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,QAAQ,CAAEC,eAAe,KAAQ,sBAAsB,CAChE,OAASC,GAAG,CAAEC,OAAO,KAAQ,eAAe,CAC5C,OAASC,YAAY,KAAQ,gBAAgB,CAC7C,OAASC,UAAU,KAAQ,OAAO,CAClC,OAASC,cAAc,KAAQ,uCAAuC,CACtE,MAAO,CAAAC,MAAM,KAAM,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAErC,KAAM,CAAAC,SAAS,CAAGP,MAAM,CAACL,GAAG,CAAC,CAAAa,eAAA,GAAAA,eAAA,CAAAC,sBAAA,8CAI5B,CAED,KAAM,CAAAC,aAAa,CAAGV,MAAM,CAACJ,OAAO,CAAC,CAAAe,gBAAA,GAAAA,gBAAA,CAAAF,sBAAA,yEAIpC,CAED,MAAO,MAAM,CAAAG,aAAa,CAAGC,IAAA,EAAY,IAAX,CAACC,IAAI,CAAC,CAAAD,IAAA,CAEhC,KAAM,CAACE,KAAK,CAACC,QAAQ,CAAC,CAAGxB,QAAQ,CAAC,EAAE,CAAC,CACrC,KAAM,CAACyB,OAAO,CAACC,cAAc,CAACC,MAAM,CAACC,MAAM,CAAC,CAAGtB,UAAU,CAACC,cAAc,CAAC,CAEzER,SAAS,CAAC,IAAK,CAEX,KAAM,CAAA8B,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC1B,GAAI,CAAAC,GAAG,CAAG,KAAM,CAAA7B,QAAQ,CAAC,CAAC,CAC1B,KAAM,CAAA8B,YAAY,CAAGD,GAAG,CAACE,MAAM,CAACC,IAAI,EAAIA,IAAI,CAACC,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACd,IAAI,CAACa,WAAW,CAAC,CAAC,CAAC,CAAC,CAC7FX,QAAQ,CAACO,YAAY,CAAC,CACtB;AACJ,CAAC,CAED,KAAM,CAAAM,iBAAiB,CAAG,KAAAA,CAAA,GAAW,CACjCd,KAAK,CAACS,MAAM,CAAEC,IAAI,EAAKA,IAAI,CAACK,GAAG,GAAGb,OAAO,CAACa,GAAG,CAAC,CAC7CC,GAAG,CAAC,KAAM,CAAAN,IAAI,EAAG,CACd,KAAM,CAAA/B,eAAe,CAAC,CAACsC,QAAQ,CAAEf,OAAO,CAACa,GAAG,CAAEG,UAAU,CAAER,IAAI,CAACK,GAAI,CAAC,CAAC,CACzE,CAAC,CAAC,CACN,CAAC,CAEDT,SAAS,CAAC,CAAC,CACXQ,iBAAiB,CAAC,CAAC,CACvB,CAAC,CAAC,CAACf,IAAI,CAAC,CAAC,CAITvB,SAAS,CAAC,IAAK,CACX4B,MAAM,CAACe,OAAO,CAACC,IAAI,CAAC,UAAU,CAAClB,OAAO,CAAC,CACvCE,MAAM,CAACe,OAAO,CAACE,EAAE,CAAC,UAAU,CAAErB,KAAK,EAAI,CACnCG,cAAc,CAACH,KAAK,CAAC,CACzB,CAAC,CAAC,CACN,CAAC,CAAC,CAACE,OAAO,CAACG,MAAM,CAAC,CAAC,CAErB,mBACElB,IAAA,CAACK,SAAS,EAAA8B,QAAA,CAEFtB,KAAK,CAACS,MAAM,CAACC,IAAI,EAAIA,IAAI,CAACK,GAAG,GAAGb,OAAO,CAACa,GAAG,CAAC,CAACC,GAAG,CAACN,IAAI,eACjDnB,KAAA,CAAAF,SAAA,EAAAiC,QAAA,eACInC,IAAA,CAACL,YAAY,EAAC4B,IAAI,CAAEA,IAAK,CAAE,CAAC,cAC5BvB,IAAA,CAACQ,aAAa,GAAC,CAAC,EAClB,CACL,CAAC,CAEC,CAAC,CAEhB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}